# 代码生成器-使用帮助

[原代码仓库地址](https://github.com/cq-panda/Vue.NetCore)

[原作者教程地址](http://v2.volcore.xyz/document/coder)

## 新增代码配置

### 仅创建目录

父级ID填0，表中文名填目录名称；其他必填项可随便填，但是不能填`/`。

### 生成代码

首先在数据库需要创建或有基本表结构，才能生成代码，建议加上字段的备注信息以便后续自动生成`列显示名称`。

父级ID填写父级目录的主键ID，实际表名填连接的数据库的表名，文件名可填数据库表名。

生成后点击`表结构`中的`同步表结构`即可显示数据库里对应的数据。

### 具体参数-常用部分

> 以下是配置代码生成器时常用的参数及其介绍。

|    参数名称    | 参数介绍                                                                 |
|:----------:|:---------------------------------------------------------------------|
|    快捷编辑    | 可不填，填写`列名`后，可以查看数据时点击蓝底链接直接编辑该数据信息                                   |
|   Vue 路径   | 填写本地前端项目到views的绝对路径，例：D:\work\Web\src\views                          |
|   列显示名称    | 字段的备注信息（后续代码生成后的表头名称，也是导出.xlsx的表头信息）                                 |
|     列名     | 数据库里的字段名（一般由自动生成，不用修改）                                               |
|   查询行、列    | 选择高级查询时，此字段所在的行与列，如行=1列=2，则所在位置为第1行第2列，不填则不显示该查询条件                   |
|   编辑行、列    | 同上，编辑完后需要点击`生成Model`                                                 |
|    查询类型    | 可不填，默认为`input`，根据需求填写。常用有：`input`、`模糊查询`、`date`、`datetime`、`select`等 |
|    编辑类型    | 同上，需注意如果使用`select`下拉框，需指定数据源                                         |
|    数据源     | 当编辑类型选择了`select`时，需指定数据源。如需新增数据源，需在`系统设置`的`下拉框绑定设置`中新增               |
| table列显示类型 | 有`img`、`excel`、`file`、`date`， 选择显示的文件类型 ，选`img`会直接显示图片缩略图            |
|   列显示顺序    | 数字越大越靠前，不建议用小数字，因为后续可能会插入数据打乱，数据间隔大方便插槽                              |
|    可为空     | 默认为否，选择是后，该字段不可为空，实际上是加了一个required属性                                 |
|    是否只读    | 编辑或新建时，如果此字段为只读，则不可修改                                                |
|    是否显示    | 是否显示该字段，一般id等标识会隐藏显示                                                 |
|  table列宽度  | 查看和使用导出功能时，表头的实际长度                                                   |

填写完成后保存，然后依次点击`生成Vue页面`，`生成Model`，`生成业务类`后刷新页面即可。

## 修改代码配置

1、如果需要修改表结构，请在数据库修改，再点`同步表结构`->`生成Vue页面`->`生成model`。

2、修改编辑行后需要点击生成model、生成Vue页面。

## 删除当前菜单

删除左侧配置菜单：`删除菜单`->`确定`

（暂未测试）

## 启用菜单

> 如果是用代码生成器生成的Vue页面，请在 `viewGrid.js` 中参考前面代码给新增自动生成的代码**手动添加meta属性**。
>
> （如果不加 meta 属性会导致在菜单访问地址提示401）

### 创建一级菜单或空菜单

- **父级ID**：填 `0`。
- **菜单名称**：填目录名称。
- **视图/表名**：填写 `/`。
- **(路由)Url**：不填。
- **排序号**：可修改，数字越大越靠前。
- **是否启动**：选择`启动`。
- **菜单类型**：选择`PC菜单`。

然后`保存`即可。

### 创建子菜单

在父菜单下点击`添加子级`或在同级菜单下点击`添加同级`，确保父级ID为对应父级菜单的ID。

- **菜单名称**：填目录名称。
- **视图/表名**：填写代码生成器中填写的表名（一般也是数据库的表名）。
- **(路由)Url**：填 Vue 项目中 `src->router->viewGrid.js` 对应表名的 path 属性，例如：`/t_pay`。
- **排序号**：可修改，数字越大越靠前。
- **是否启动**：选择`启动`。
- **菜单类型**：选择`PC菜单`，并勾选`需求权限`。

然后`保存`即可。

## 配置权限：

以配置角色`员工`的权限为例：

进入`用户管理`的`权限管理`，选择员工，找到响应菜单，勾选响应所需权限后点击保存即可。

配置后可验证权限：

登录角色为员工的账号，查看是否有对应权限功能。

------

因已离开公司，一些地方从今天（2024-8-11）来看，还有很多可以写更清楚地方，但没法测试了，就这样吧。

